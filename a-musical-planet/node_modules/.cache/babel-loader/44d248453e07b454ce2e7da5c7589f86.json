{"ast":null,"code":"/**\n * @module ol/control/ZoomSlider\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport PointerEventType from '../pointer/EventType.js';\nimport { CLASS_CONTROL, CLASS_UNSELECTABLE } from '../css.js';\nimport { clamp } from '../math.js';\nimport { easeOut } from '../easing.js';\nimport { listen, unlistenByKey } from '../events.js';\nimport { stopPropagation } from '../events/Event.js';\n/**\n * The enum for available directions.\n *\n * @enum {number}\n */\n\nvar Direction = {\n  VERTICAL: 0,\n  HORIZONTAL: 1\n};\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-zoomslider'] CSS class name.\n * @property {number} [duration=200] Animation duration in milliseconds.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control\n * should be re-rendered. This is called in a `requestAnimationFrame` callback.\n */\n\n/**\n * @classdesc\n * A slider type of control for zooming.\n *\n * Example:\n *\n *     map.addControl(new ZoomSlider());\n *\n * @api\n */\n\nvar ZoomSlider = function (_super) {\n  __extends(ZoomSlider, _super);\n  /**\n   * @param {Options} [opt_options] Zoom slider options.\n   */\n\n\n  function ZoomSlider(opt_options) {\n    var _this = this;\n\n    var options = opt_options ? opt_options : {};\n    _this = _super.call(this, {\n      element: document.createElement('div'),\n      render: options.render\n    }) || this;\n    /**\n     * @type {!Array<import(\"../events.js\").EventsKey>}\n     * @private\n     */\n\n    _this.dragListenerKeys_ = [];\n    /**\n     * Will hold the current resolution of the view.\n     *\n     * @type {number|undefined}\n     * @private\n     */\n\n    _this.currentResolution_ = undefined;\n    /**\n     * The direction of the slider. Will be determined from actual display of the\n     * container and defaults to Direction.VERTICAL.\n     *\n     * @type {Direction}\n     * @private\n     */\n\n    _this.direction_ = Direction.VERTICAL;\n    /**\n     * @type {boolean}\n     * @private\n     */\n\n    _this.dragging_;\n    /**\n     * @type {number}\n     * @private\n     */\n\n    _this.heightLimit_ = 0;\n    /**\n     * @type {number}\n     * @private\n     */\n\n    _this.widthLimit_ = 0;\n    /**\n     * @type {number|undefined}\n     * @private\n     */\n\n    _this.startX_;\n    /**\n     * @type {number|undefined}\n     * @private\n     */\n\n    _this.startY_;\n    /**\n     * The calculated thumb size (border box plus margins).  Set when initSlider_\n     * is called.\n     * @type {import(\"../size.js\").Size}\n     * @private\n     */\n\n    _this.thumbSize_ = null;\n    /**\n     * Whether the slider is initialized.\n     * @type {boolean}\n     * @private\n     */\n\n    _this.sliderInitialized_ = false;\n    /**\n     * @type {number}\n     * @private\n     */\n\n    _this.duration_ = options.duration !== undefined ? options.duration : 200;\n    var className = options.className !== undefined ? options.className : 'ol-zoomslider';\n    var thumbElement = document.createElement('button');\n    thumbElement.setAttribute('type', 'button');\n    thumbElement.className = className + '-thumb ' + CLASS_UNSELECTABLE;\n    var containerElement = _this.element;\n    containerElement.className = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    containerElement.appendChild(thumbElement);\n    containerElement.addEventListener(PointerEventType.POINTERDOWN, _this.handleDraggerStart_.bind(_this), false);\n    containerElement.addEventListener(PointerEventType.POINTERMOVE, _this.handleDraggerDrag_.bind(_this), false);\n    containerElement.addEventListener(PointerEventType.POINTERUP, _this.handleDraggerEnd_.bind(_this), false);\n    containerElement.addEventListener(EventType.CLICK, _this.handleContainerClick_.bind(_this), false);\n    thumbElement.addEventListener(EventType.CLICK, stopPropagation, false);\n    return _this;\n  }\n  /**\n   * Remove the control from its current map and attach it to the new map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   * @api\n   */\n\n\n  ZoomSlider.prototype.setMap = function (map) {\n    _super.prototype.setMap.call(this, map);\n\n    if (map) {\n      map.render();\n    }\n  };\n  /**\n   * Initializes the slider element. This will determine and set this controls\n   * direction_ and also constrain the dragging of the thumb to always be within\n   * the bounds of the container.\n   *\n   * @return {boolean} Initialization successful\n   * @private\n   */\n\n\n  ZoomSlider.prototype.initSlider_ = function () {\n    var container = this.element;\n    var containerWidth = container.offsetWidth;\n    var containerHeight = container.offsetHeight;\n\n    if (containerWidth === 0 && containerHeight === 0) {\n      return this.sliderInitialized_ = false;\n    }\n\n    var containerStyle = getComputedStyle(container);\n    containerWidth -= parseFloat(containerStyle['paddingRight']) + parseFloat(containerStyle['paddingLeft']);\n    containerHeight -= parseFloat(containerStyle['paddingTop']) + parseFloat(containerStyle['paddingBottom']);\n    var thumb = container.firstElementChild;\n    var thumbStyle = getComputedStyle(thumb);\n    var thumbWidth = thumb.offsetWidth + parseFloat(thumbStyle['marginRight']) + parseFloat(thumbStyle['marginLeft']);\n    var thumbHeight = thumb.offsetHeight + parseFloat(thumbStyle['marginTop']) + parseFloat(thumbStyle['marginBottom']);\n    this.thumbSize_ = [thumbWidth, thumbHeight];\n\n    if (containerWidth > containerHeight) {\n      this.direction_ = Direction.HORIZONTAL;\n      this.widthLimit_ = containerWidth - thumbWidth;\n    } else {\n      this.direction_ = Direction.VERTICAL;\n      this.heightLimit_ = containerHeight - thumbHeight;\n    }\n\n    return this.sliderInitialized_ = true;\n  };\n  /**\n   * @param {PointerEvent} event The browser event to handle.\n   * @private\n   */\n\n\n  ZoomSlider.prototype.handleContainerClick_ = function (event) {\n    var view = this.getMap().getView();\n    var relativePosition = this.getRelativePosition_(event.offsetX - this.thumbSize_[0] / 2, event.offsetY - this.thumbSize_[1] / 2);\n    var resolution = this.getResolutionForPosition_(relativePosition);\n    var zoom = view.getConstrainedZoom(view.getZoomForResolution(resolution));\n    view.animateInternal({\n      zoom: zoom,\n      duration: this.duration_,\n      easing: easeOut\n    });\n  };\n  /**\n   * Handle dragger start events.\n   * @param {PointerEvent} event The drag event.\n   * @private\n   */\n\n\n  ZoomSlider.prototype.handleDraggerStart_ = function (event) {\n    if (!this.dragging_ && event.target === this.element.firstElementChild) {\n      var element = this.element.firstElementChild;\n      this.getMap().getView().beginInteraction();\n      this.startX_ = event.clientX - parseFloat(element.style.left);\n      this.startY_ = event.clientY - parseFloat(element.style.top);\n      this.dragging_ = true;\n\n      if (this.dragListenerKeys_.length === 0) {\n        var drag = this.handleDraggerDrag_;\n        var end = this.handleDraggerEnd_;\n        var doc = this.getMap().getOwnerDocument();\n        this.dragListenerKeys_.push(listen(doc, PointerEventType.POINTERMOVE, drag, this), listen(doc, PointerEventType.POINTERUP, end, this));\n      }\n    }\n  };\n  /**\n   * Handle dragger drag events.\n   *\n   * @param {PointerEvent} event The drag event.\n   * @private\n   */\n\n\n  ZoomSlider.prototype.handleDraggerDrag_ = function (event) {\n    if (this.dragging_) {\n      var deltaX = event.clientX - this.startX_;\n      var deltaY = event.clientY - this.startY_;\n      var relativePosition = this.getRelativePosition_(deltaX, deltaY);\n      this.currentResolution_ = this.getResolutionForPosition_(relativePosition);\n      this.getMap().getView().setResolution(this.currentResolution_);\n    }\n  };\n  /**\n   * Handle dragger end events.\n   * @param {PointerEvent} event The drag event.\n   * @private\n   */\n\n\n  ZoomSlider.prototype.handleDraggerEnd_ = function (event) {\n    if (this.dragging_) {\n      var view = this.getMap().getView();\n      view.endInteraction();\n      this.dragging_ = false;\n      this.startX_ = undefined;\n      this.startY_ = undefined;\n      this.dragListenerKeys_.forEach(unlistenByKey);\n      this.dragListenerKeys_.length = 0;\n    }\n  };\n  /**\n   * Positions the thumb inside its container according to the given resolution.\n   *\n   * @param {number} res The res.\n   * @private\n   */\n\n\n  ZoomSlider.prototype.setThumbPosition_ = function (res) {\n    var position = this.getPositionForResolution_(res);\n    var thumb = this.element.firstElementChild;\n\n    if (this.direction_ == Direction.HORIZONTAL) {\n      thumb.style.left = this.widthLimit_ * position + 'px';\n    } else {\n      thumb.style.top = this.heightLimit_ * position + 'px';\n    }\n  };\n  /**\n   * Calculates the relative position of the thumb given x and y offsets.  The\n   * relative position scales from 0 to 1.  The x and y offsets are assumed to be\n   * in pixel units within the dragger limits.\n   *\n   * @param {number} x Pixel position relative to the left of the slider.\n   * @param {number} y Pixel position relative to the top of the slider.\n   * @return {number} The relative position of the thumb.\n   * @private\n   */\n\n\n  ZoomSlider.prototype.getRelativePosition_ = function (x, y) {\n    var amount;\n\n    if (this.direction_ === Direction.HORIZONTAL) {\n      amount = x / this.widthLimit_;\n    } else {\n      amount = y / this.heightLimit_;\n    }\n\n    return clamp(amount, 0, 1);\n  };\n  /**\n   * Calculates the corresponding resolution of the thumb given its relative\n   * position (where 0 is the minimum and 1 is the maximum).\n   *\n   * @param {number} position The relative position of the thumb.\n   * @return {number} The corresponding resolution.\n   * @private\n   */\n\n\n  ZoomSlider.prototype.getResolutionForPosition_ = function (position) {\n    var fn = this.getMap().getView().getResolutionForValueFunction();\n    return fn(1 - position);\n  };\n  /**\n   * Determines the relative position of the slider for the given resolution.  A\n   * relative position of 0 corresponds to the minimum view resolution.  A\n   * relative position of 1 corresponds to the maximum view resolution.\n   *\n   * @param {number} res The resolution.\n   * @return {number} The relative position value (between 0 and 1).\n   * @private\n   */\n\n\n  ZoomSlider.prototype.getPositionForResolution_ = function (res) {\n    var fn = this.getMap().getView().getValueForResolutionFunction();\n    return clamp(1 - fn(res), 0, 1);\n  };\n  /**\n   * Update the zoomslider element.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @override\n   */\n\n\n  ZoomSlider.prototype.render = function (mapEvent) {\n    if (!mapEvent.frameState) {\n      return;\n    }\n\n    if (!this.sliderInitialized_ && !this.initSlider_()) {\n      return;\n    }\n\n    var res = mapEvent.frameState.viewState.resolution;\n    this.currentResolution_ = res;\n    this.setThumbPosition_(res);\n  };\n\n  return ZoomSlider;\n}(Control);\n\nexport default ZoomSlider;","map":{"version":3,"sources":["../src/control/ZoomSlider.js"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/**\n * @module ol/control/ZoomSlider\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport PointerEventType from '../pointer/EventType.js';\nimport { CLASS_CONTROL, CLASS_UNSELECTABLE } from '../css.js';\nimport { clamp } from '../math.js';\nimport { easeOut } from '../easing.js';\nimport { listen, unlistenByKey } from '../events.js';\nimport { stopPropagation } from '../events/Event.js';\n/**\n * The enum for available directions.\n *\n * @enum {number}\n */\nvar Direction = {\n    VERTICAL: 0,\n    HORIZONTAL: 1,\n};\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-zoomslider'] CSS class name.\n * @property {number} [duration=200] Animation duration in milliseconds.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control\n * should be re-rendered. This is called in a `requestAnimationFrame` callback.\n */\n/**\n * @classdesc\n * A slider type of control for zooming.\n *\n * Example:\n *\n *     map.addControl(new ZoomSlider());\n *\n * @api\n */\nvar ZoomSlider = /** @class */ (function (_super) {\n    __extends(ZoomSlider, _super);\n    /**\n     * @param {Options} [opt_options] Zoom slider options.\n     */\n    function ZoomSlider(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        _this = _super.call(this, {\n            element: document.createElement('div'),\n            render: options.render,\n        }) || this;\n        /**\n         * @type {!Array<import(\"../events.js\").EventsKey>}\n         * @private\n         */\n        _this.dragListenerKeys_ = [];\n        /**\n         * Will hold the current resolution of the view.\n         *\n         * @type {number|undefined}\n         * @private\n         */\n        _this.currentResolution_ = undefined;\n        /**\n         * The direction of the slider. Will be determined from actual display of the\n         * container and defaults to Direction.VERTICAL.\n         *\n         * @type {Direction}\n         * @private\n         */\n        _this.direction_ = Direction.VERTICAL;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        _this.dragging_;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.heightLimit_ = 0;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.widthLimit_ = 0;\n        /**\n         * @type {number|undefined}\n         * @private\n         */\n        _this.startX_;\n        /**\n         * @type {number|undefined}\n         * @private\n         */\n        _this.startY_;\n        /**\n         * The calculated thumb size (border box plus margins).  Set when initSlider_\n         * is called.\n         * @type {import(\"../size.js\").Size}\n         * @private\n         */\n        _this.thumbSize_ = null;\n        /**\n         * Whether the slider is initialized.\n         * @type {boolean}\n         * @private\n         */\n        _this.sliderInitialized_ = false;\n        /**\n         * @type {number}\n         * @private\n         */\n        _this.duration_ = options.duration !== undefined ? options.duration : 200;\n        var className = options.className !== undefined ? options.className : 'ol-zoomslider';\n        var thumbElement = document.createElement('button');\n        thumbElement.setAttribute('type', 'button');\n        thumbElement.className = className + '-thumb ' + CLASS_UNSELECTABLE;\n        var containerElement = _this.element;\n        containerElement.className =\n            className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n        containerElement.appendChild(thumbElement);\n        containerElement.addEventListener(PointerEventType.POINTERDOWN, _this.handleDraggerStart_.bind(_this), false);\n        containerElement.addEventListener(PointerEventType.POINTERMOVE, _this.handleDraggerDrag_.bind(_this), false);\n        containerElement.addEventListener(PointerEventType.POINTERUP, _this.handleDraggerEnd_.bind(_this), false);\n        containerElement.addEventListener(EventType.CLICK, _this.handleContainerClick_.bind(_this), false);\n        thumbElement.addEventListener(EventType.CLICK, stopPropagation, false);\n        return _this;\n    }\n    /**\n     * Remove the control from its current map and attach it to the new map.\n     * Subclasses may set up event handlers to get notified about changes to\n     * the map here.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     * @api\n     */\n    ZoomSlider.prototype.setMap = function (map) {\n        _super.prototype.setMap.call(this, map);\n        if (map) {\n            map.render();\n        }\n    };\n    /**\n     * Initializes the slider element. This will determine and set this controls\n     * direction_ and also constrain the dragging of the thumb to always be within\n     * the bounds of the container.\n     *\n     * @return {boolean} Initialization successful\n     * @private\n     */\n    ZoomSlider.prototype.initSlider_ = function () {\n        var container = this.element;\n        var containerWidth = container.offsetWidth;\n        var containerHeight = container.offsetHeight;\n        if (containerWidth === 0 && containerHeight === 0) {\n            return (this.sliderInitialized_ = false);\n        }\n        var containerStyle = getComputedStyle(container);\n        containerWidth -=\n            parseFloat(containerStyle['paddingRight']) +\n                parseFloat(containerStyle['paddingLeft']);\n        containerHeight -=\n            parseFloat(containerStyle['paddingTop']) +\n                parseFloat(containerStyle['paddingBottom']);\n        var thumb = /** @type {HTMLElement} */ (container.firstElementChild);\n        var thumbStyle = getComputedStyle(thumb);\n        var thumbWidth = thumb.offsetWidth +\n            parseFloat(thumbStyle['marginRight']) +\n            parseFloat(thumbStyle['marginLeft']);\n        var thumbHeight = thumb.offsetHeight +\n            parseFloat(thumbStyle['marginTop']) +\n            parseFloat(thumbStyle['marginBottom']);\n        this.thumbSize_ = [thumbWidth, thumbHeight];\n        if (containerWidth > containerHeight) {\n            this.direction_ = Direction.HORIZONTAL;\n            this.widthLimit_ = containerWidth - thumbWidth;\n        }\n        else {\n            this.direction_ = Direction.VERTICAL;\n            this.heightLimit_ = containerHeight - thumbHeight;\n        }\n        return (this.sliderInitialized_ = true);\n    };\n    /**\n     * @param {PointerEvent} event The browser event to handle.\n     * @private\n     */\n    ZoomSlider.prototype.handleContainerClick_ = function (event) {\n        var view = this.getMap().getView();\n        var relativePosition = this.getRelativePosition_(event.offsetX - this.thumbSize_[0] / 2, event.offsetY - this.thumbSize_[1] / 2);\n        var resolution = this.getResolutionForPosition_(relativePosition);\n        var zoom = view.getConstrainedZoom(view.getZoomForResolution(resolution));\n        view.animateInternal({\n            zoom: zoom,\n            duration: this.duration_,\n            easing: easeOut,\n        });\n    };\n    /**\n     * Handle dragger start events.\n     * @param {PointerEvent} event The drag event.\n     * @private\n     */\n    ZoomSlider.prototype.handleDraggerStart_ = function (event) {\n        if (!this.dragging_ && event.target === this.element.firstElementChild) {\n            var element = /** @type {HTMLElement} */ (this.element.firstElementChild);\n            this.getMap().getView().beginInteraction();\n            this.startX_ = event.clientX - parseFloat(element.style.left);\n            this.startY_ = event.clientY - parseFloat(element.style.top);\n            this.dragging_ = true;\n            if (this.dragListenerKeys_.length === 0) {\n                var drag = this.handleDraggerDrag_;\n                var end = this.handleDraggerEnd_;\n                var doc = this.getMap().getOwnerDocument();\n                this.dragListenerKeys_.push(listen(doc, PointerEventType.POINTERMOVE, drag, this), listen(doc, PointerEventType.POINTERUP, end, this));\n            }\n        }\n    };\n    /**\n     * Handle dragger drag events.\n     *\n     * @param {PointerEvent} event The drag event.\n     * @private\n     */\n    ZoomSlider.prototype.handleDraggerDrag_ = function (event) {\n        if (this.dragging_) {\n            var deltaX = event.clientX - this.startX_;\n            var deltaY = event.clientY - this.startY_;\n            var relativePosition = this.getRelativePosition_(deltaX, deltaY);\n            this.currentResolution_ =\n                this.getResolutionForPosition_(relativePosition);\n            this.getMap().getView().setResolution(this.currentResolution_);\n        }\n    };\n    /**\n     * Handle dragger end events.\n     * @param {PointerEvent} event The drag event.\n     * @private\n     */\n    ZoomSlider.prototype.handleDraggerEnd_ = function (event) {\n        if (this.dragging_) {\n            var view = this.getMap().getView();\n            view.endInteraction();\n            this.dragging_ = false;\n            this.startX_ = undefined;\n            this.startY_ = undefined;\n            this.dragListenerKeys_.forEach(unlistenByKey);\n            this.dragListenerKeys_.length = 0;\n        }\n    };\n    /**\n     * Positions the thumb inside its container according to the given resolution.\n     *\n     * @param {number} res The res.\n     * @private\n     */\n    ZoomSlider.prototype.setThumbPosition_ = function (res) {\n        var position = this.getPositionForResolution_(res);\n        var thumb = /** @type {HTMLElement} */ (this.element.firstElementChild);\n        if (this.direction_ == Direction.HORIZONTAL) {\n            thumb.style.left = this.widthLimit_ * position + 'px';\n        }\n        else {\n            thumb.style.top = this.heightLimit_ * position + 'px';\n        }\n    };\n    /**\n     * Calculates the relative position of the thumb given x and y offsets.  The\n     * relative position scales from 0 to 1.  The x and y offsets are assumed to be\n     * in pixel units within the dragger limits.\n     *\n     * @param {number} x Pixel position relative to the left of the slider.\n     * @param {number} y Pixel position relative to the top of the slider.\n     * @return {number} The relative position of the thumb.\n     * @private\n     */\n    ZoomSlider.prototype.getRelativePosition_ = function (x, y) {\n        var amount;\n        if (this.direction_ === Direction.HORIZONTAL) {\n            amount = x / this.widthLimit_;\n        }\n        else {\n            amount = y / this.heightLimit_;\n        }\n        return clamp(amount, 0, 1);\n    };\n    /**\n     * Calculates the corresponding resolution of the thumb given its relative\n     * position (where 0 is the minimum and 1 is the maximum).\n     *\n     * @param {number} position The relative position of the thumb.\n     * @return {number} The corresponding resolution.\n     * @private\n     */\n    ZoomSlider.prototype.getResolutionForPosition_ = function (position) {\n        var fn = this.getMap().getView().getResolutionForValueFunction();\n        return fn(1 - position);\n    };\n    /**\n     * Determines the relative position of the slider for the given resolution.  A\n     * relative position of 0 corresponds to the minimum view resolution.  A\n     * relative position of 1 corresponds to the maximum view resolution.\n     *\n     * @param {number} res The resolution.\n     * @return {number} The relative position value (between 0 and 1).\n     * @private\n     */\n    ZoomSlider.prototype.getPositionForResolution_ = function (res) {\n        var fn = this.getMap().getView().getValueForResolutionFunction();\n        return clamp(1 - fn(res), 0, 1);\n    };\n    /**\n     * Update the zoomslider element.\n     * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n     * @override\n     */\n    ZoomSlider.prototype.render = function (mapEvent) {\n        if (!mapEvent.frameState) {\n            return;\n        }\n        if (!this.sliderInitialized_ && !this.initSlider_()) {\n            return;\n        }\n        var res = mapEvent.frameState.viewState.resolution;\n        this.currentResolution_ = res;\n        this.setThumbPosition_(res);\n    };\n    return ZoomSlider;\n}(Control));\nexport default ZoomSlider;\n//# sourceMappingURL=ZoomSlider.js.map"]},"metadata":{},"sourceType":"module"}