{"ast":null,"code":"var _jsxFileName = \"/home/dylan/MusicGuessr/a-musical-planet/src/Auth.js\";\nimport axios from \"axios\";\nimport React from \"react\";\nimport { Credentials } from \"./Credentials\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SpotifyWebApi = require(\"spotify-web-api-node\");\n\nconst Auth = props => {\n  const code = new URLSearchParams(window.location.search).get(\"code\");\n  var spotifyApi = new SpotifyWebApi(Credentials()); //   axios(\"https://accounts.spotify.com/api/token\", {\n  //     headers: {\n  //       \"Content-Type\": \"application/x-www-form-urlencoded\",\n  //       Authorization:\n  //         \"Basic \" + btoa(Credentials().clientId + \":\" + Credentials().secretId),\n  //     },\n  //     body: {\n  //       grant_type: \"authorization_code\",\n  //       code: code,\n  //       redirect_uri: Credentials().redirectUri,\n  //     },\n  //     method: \"POST\",\n  //   })\n\n  axios({\n    url: \"https://accounts.spotify.com/api/token\",\n    method: \"post\",\n    params: {\n      grant_type: \"authorization_code\",\n      code: code,\n      redirect_uri: Credentials().redirectUri\n    },\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\n    },\n    auth: {\n      username: Credentials().clientId,\n      password: Credentials().secretId\n    }\n  }).then(function ({\n    data\n  }) {\n    console.log(data);\n    console.log(\"The token expires in \" + data[\"expires_in\"]);\n    console.log(\"The access token is \" + data[\"access_token\"]);\n    console.log(\"The refresh token is \" + data[\"refresh_token\"]); //setToken(data[\"access_token\"]);\n\n    console.log(`Sending token as ${data[\"access_token\"]}`);\n    props.gotToken(data[\"access_token\"]);\n  }, function (err) {\n    console.log(\"Something went wrong!\", err);\n  }); //   spotifyApi.authorizationCodeGrant(code).then(\n  //     function (data) {\n  //       console.log(\"The token expires in \" + data.body[\"expires_in\"]);\n  //       console.log(\"The access token is \" + data.body[\"access_token\"]);\n  //       console.log(\"The refresh token is \" + data.body[\"refresh_token\"]);\n  //       // Set the access token on the API object to use it in later calls\n  //       spotifyApi.setAccessToken(data.body[\"access_token\"]);\n  //       spotifyApi.setRefreshToken(data.body[\"refresh_token\"]);\n  //       token = spotifyApi.access_token;\n  //     },\n  //     function (err) {\n  //       console.log(\"Something went wrong!\", err);\n  //     }\n  //   );\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Hello!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Your token is blah\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n\n_c = Auth;\nexport default Auth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"sources":["/home/dylan/MusicGuessr/a-musical-planet/src/Auth.js"],"names":["axios","React","Credentials","SpotifyWebApi","require","Auth","props","code","URLSearchParams","window","location","search","get","spotifyApi","url","method","params","grant_type","redirect_uri","redirectUri","headers","Accept","auth","username","clientId","password","secretId","then","data","console","log","gotToken","err"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,eAA5B;;;AACA,MAAMC,aAAa,GAAGC,OAAO,CAAC,sBAAD,CAA7B;;AAEA,MAAMC,IAAI,GAAIC,KAAD,IAAW;AACtB,QAAMC,IAAI,GAAG,IAAIC,eAAJ,CAAoBC,MAAM,CAACC,QAAP,CAAgBC,MAApC,EAA4CC,GAA5C,CAAgD,MAAhD,CAAb;AACA,MAAIC,UAAU,GAAG,IAAIV,aAAJ,CAAkBD,WAAW,EAA7B,CAAjB,CAFsB,CAGtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAF,EAAAA,KAAK,CAAC;AACJc,IAAAA,GAAG,EAAE,wCADD;AAEJC,IAAAA,MAAM,EAAE,MAFJ;AAGJC,IAAAA,MAAM,EAAE;AACNC,MAAAA,UAAU,EAAE,oBADN;AAENV,MAAAA,IAAI,EAAEA,IAFA;AAGNW,MAAAA,YAAY,EAAEhB,WAAW,GAAGiB;AAHtB,KAHJ;AAQJC,IAAAA,OAAO,EAAE;AACPC,MAAAA,MAAM,EAAE,kBADD;AAEP,sBAAgB;AAFT,KARL;AAYJC,IAAAA,IAAI,EAAE;AACJC,MAAAA,QAAQ,EAAErB,WAAW,GAAGsB,QADpB;AAEJC,MAAAA,QAAQ,EAAEvB,WAAW,GAAGwB;AAFpB;AAZF,GAAD,CAAL,CAgBGC,IAhBH,CAiBE,UAAU;AAAEC,IAAAA;AAAF,GAAV,EAAoB;AAClBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,0BAA0BF,IAAI,CAAC,YAAD,CAA1C;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,yBAAyBF,IAAI,CAAC,cAAD,CAAzC;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,0BAA0BF,IAAI,CAAC,eAAD,CAA1C,EAJkB,CAKlB;;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAa,oBAAmBF,IAAI,CAAC,cAAD,CAAiB,EAArD;AACAtB,IAAAA,KAAK,CAACyB,QAAN,CAAeH,IAAI,CAAC,cAAD,CAAnB;AACD,GAzBH,EA0BE,UAAUI,GAAV,EAAe;AACbH,IAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAAqCE,GAArC;AACD,GA5BH,EAhBsB,CA+CtB;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,sBACE;AAAA,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAMD,CApED;;KAAM3B,I;AAsEN,eAAeA,IAAf","sourcesContent":["import axios from \"axios\";\nimport React from \"react\";\nimport { Credentials } from \"./Credentials\";\nconst SpotifyWebApi = require(\"spotify-web-api-node\");\n\nconst Auth = (props) => {\n  const code = new URLSearchParams(window.location.search).get(\"code\");\n  var spotifyApi = new SpotifyWebApi(Credentials());\n  //   axios(\"https://accounts.spotify.com/api/token\", {\n  //     headers: {\n  //       \"Content-Type\": \"application/x-www-form-urlencoded\",\n  //       Authorization:\n  //         \"Basic \" + btoa(Credentials().clientId + \":\" + Credentials().secretId),\n  //     },\n  //     body: {\n  //       grant_type: \"authorization_code\",\n  //       code: code,\n  //       redirect_uri: Credentials().redirectUri,\n  //     },\n  //     method: \"POST\",\n  //   })\n  axios({\n    url: \"https://accounts.spotify.com/api/token\",\n    method: \"post\",\n    params: {\n      grant_type: \"authorization_code\",\n      code: code,\n      redirect_uri: Credentials().redirectUri,\n    },\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n    },\n    auth: {\n      username: Credentials().clientId,\n      password: Credentials().secretId,\n    },\n  }).then(\n    function ({ data }) {\n      console.log(data);\n      console.log(\"The token expires in \" + data[\"expires_in\"]);\n      console.log(\"The access token is \" + data[\"access_token\"]);\n      console.log(\"The refresh token is \" + data[\"refresh_token\"]);\n      //setToken(data[\"access_token\"]);\n      console.log(`Sending token as ${data[\"access_token\"]}`);\n      props.gotToken(data[\"access_token\"]);\n    },\n    function (err) {\n      console.log(\"Something went wrong!\", err);\n    }\n  );\n\n  //   spotifyApi.authorizationCodeGrant(code).then(\n  //     function (data) {\n  //       console.log(\"The token expires in \" + data.body[\"expires_in\"]);\n  //       console.log(\"The access token is \" + data.body[\"access_token\"]);\n  //       console.log(\"The refresh token is \" + data.body[\"refresh_token\"]);\n\n  //       // Set the access token on the API object to use it in later calls\n  //       spotifyApi.setAccessToken(data.body[\"access_token\"]);\n  //       spotifyApi.setRefreshToken(data.body[\"refresh_token\"]);\n  //       token = spotifyApi.access_token;\n  //     },\n  //     function (err) {\n  //       console.log(\"Something went wrong!\", err);\n  //     }\n  //   );\n  return (\n    <div>\n      <h1>Hello!</h1>\n      <p>Your token is blah</p>\n    </div>\n  );\n};\n\nexport default Auth;\n"]},"metadata":{},"sourceType":"module"}