{"ast":null,"code":"var _jsxFileName = \"/home/dylan/MusicGuessr/a-musical-planet/src/Auth.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useState, useEffect } from \"react\";\nimport { BrowserRouter as Router, Switch, Route, Link, useParams } from \"react-router-dom\";\nimport { Credentials } from \"./Credentials\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SpotifyWebApi = require(\"spotify-web-api-node\");\n\nconst Auth = props => {\n  _s();\n\n  //var code = document.URL.split(\"=\")[1];\n  const code = new URLSearchParams(window.location.search).get(\"code\");\n  const [token, setToken] = useState(\"\");\n  var spotifyApi = new SpotifyWebApi(Credentials());\n  useEffect(() => {\n    axios(\"https://accounts.spotify.com/api/token\", {\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        Authorization: \"Basic \" + btoa(Credentials().clientId + \":\" + Credentials().secretId)\n      },\n      data: \"grant_type=client_credentials\",\n      method: \"POST\"\n    }).then(function ({\n      data\n    }) {\n      console.log(data);\n      console.log(\"The token expires in \" + data[\"expires_in\"]);\n      console.log(\"The access token is \" + data[\"access_token\"]);\n      console.log(\"The refresh token is \" + data[\"refresh_token\"]); // Set the access token on the API object to use it in later calls\n\n      setToken(data[\"access_token\"]);\n      props.gotToken(token);\n      window.location.href = \"/play\";\n    }, function (err) {\n      console.log(\"Something went wrong!\", err);\n    });\n  }, []); //   spotifyApi.authorizationCodeGrant(code).then(\n  //     function (data) {\n  //       console.log(\"The token expires in \" + data.body[\"expires_in\"]);\n  //       console.log(\"The access token is \" + data.body[\"access_token\"]);\n  //       console.log(\"The refresh token is \" + data.body[\"refresh_token\"]);\n  //       // Set the access token on the API object to use it in later calls\n  //       spotifyApi.setAccessToken(data.body[\"access_token\"]);\n  //       spotifyApi.setRefreshToken(data.body[\"refresh_token\"]);\n  //       token = spotifyApi.access_token;\n  //     },\n  //     function (err) {\n  //       console.log(\"Something went wrong!\", err);\n  //     }\n  //   );\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Hello!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Your token is \", token]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Auth, \"uRWVyxPfKU3Lv5uAeNftFtP/ZvU=\");\n\n_c = Auth;\nexport default Auth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"sources":["/home/dylan/MusicGuessr/a-musical-planet/src/Auth.js"],"names":["axios","React","useState","useEffect","BrowserRouter","Router","Switch","Route","Link","useParams","Credentials","SpotifyWebApi","require","Auth","props","code","URLSearchParams","window","location","search","get","token","setToken","spotifyApi","headers","Authorization","btoa","clientId","secretId","data","method","then","console","log","gotToken","href","err"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SACEC,aAAa,IAAIC,MADnB,EAEEC,MAFF,EAGEC,KAHF,EAIEC,IAJF,EAKEC,SALF,QAMO,kBANP;AAOA,SAASC,WAAT,QAA4B,eAA5B;;;AACA,MAAMC,aAAa,GAAGC,OAAO,CAAC,sBAAD,CAA7B;;AAEA,MAAMC,IAAI,GAAIC,KAAD,IAAW;AAAA;;AACtB;AACA,QAAMC,IAAI,GAAG,IAAIC,eAAJ,CAAoBC,MAAM,CAACC,QAAP,CAAgBC,MAApC,EAA4CC,GAA5C,CAAgD,MAAhD,CAAb;AAEA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBpB,QAAQ,CAAC,EAAD,CAAlC;AAEA,MAAIqB,UAAU,GAAG,IAAIZ,aAAJ,CAAkBD,WAAW,EAA7B,CAAjB;AAEAP,EAAAA,SAAS,CAAC,MAAM;AACdH,IAAAA,KAAK,CAAC,wCAAD,EAA2C;AAC9CwB,MAAAA,OAAO,EAAE;AACP,wBAAgB,mCADT;AAEPC,QAAAA,aAAa,EACX,WACAC,IAAI,CAAChB,WAAW,GAAGiB,QAAd,GAAyB,GAAzB,GAA+BjB,WAAW,GAAGkB,QAA9C;AAJC,OADqC;AAO9CC,MAAAA,IAAI,EAAE,+BAPwC;AAQ9CC,MAAAA,MAAM,EAAE;AARsC,KAA3C,CAAL,CASGC,IATH,CAUE,UAAU;AAAEF,MAAAA;AAAF,KAAV,EAAoB;AAClBG,MAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAZ;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAA0BJ,IAAI,CAAC,YAAD,CAA1C;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAyBJ,IAAI,CAAC,cAAD,CAAzC;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAA0BJ,IAAI,CAAC,eAAD,CAA1C,EAJkB,CAKlB;;AACAP,MAAAA,QAAQ,CAACO,IAAI,CAAC,cAAD,CAAL,CAAR;AACAf,MAAAA,KAAK,CAACoB,QAAN,CAAeb,KAAf;AACAJ,MAAAA,MAAM,CAACC,QAAP,CAAgBiB,IAAhB,GAAuB,OAAvB;AACD,KAnBH,EAoBE,UAAUC,GAAV,EAAe;AACbJ,MAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAAqCG,GAArC;AACD,KAtBH;AAwBD,GAzBQ,EAyBN,EAzBM,CAAT,CARsB,CAmCtB;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,sBACE;AAAA,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAA,mCAAkBf,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAMD,CAxDD;;GAAMR,I;;KAAAA,I;AA0DN,eAAeA,IAAf","sourcesContent":["import axios from \"axios\";\nimport React, { useState, useEffect } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  useParams,\n} from \"react-router-dom\";\nimport { Credentials } from \"./Credentials\";\nconst SpotifyWebApi = require(\"spotify-web-api-node\");\n\nconst Auth = (props) => {\n  //var code = document.URL.split(\"=\")[1];\n  const code = new URLSearchParams(window.location.search).get(\"code\");\n\n  const [token, setToken] = useState(\"\");\n\n  var spotifyApi = new SpotifyWebApi(Credentials());\n\n  useEffect(() => {\n    axios(\"https://accounts.spotify.com/api/token\", {\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        Authorization:\n          \"Basic \" +\n          btoa(Credentials().clientId + \":\" + Credentials().secretId),\n      },\n      data: \"grant_type=client_credentials\",\n      method: \"POST\",\n    }).then(\n      function ({ data }) {\n        console.log(data);\n        console.log(\"The token expires in \" + data[\"expires_in\"]);\n        console.log(\"The access token is \" + data[\"access_token\"]);\n        console.log(\"The refresh token is \" + data[\"refresh_token\"]);\n        // Set the access token on the API object to use it in later calls\n        setToken(data[\"access_token\"]);\n        props.gotToken(token);\n        window.location.href = \"/play\";\n      },\n      function (err) {\n        console.log(\"Something went wrong!\", err);\n      }\n    );\n  }, []);\n\n  //   spotifyApi.authorizationCodeGrant(code).then(\n  //     function (data) {\n  //       console.log(\"The token expires in \" + data.body[\"expires_in\"]);\n  //       console.log(\"The access token is \" + data.body[\"access_token\"]);\n  //       console.log(\"The refresh token is \" + data.body[\"refresh_token\"]);\n\n  //       // Set the access token on the API object to use it in later calls\n  //       spotifyApi.setAccessToken(data.body[\"access_token\"]);\n  //       spotifyApi.setRefreshToken(data.body[\"refresh_token\"]);\n  //       token = spotifyApi.access_token;\n  //     },\n  //     function (err) {\n  //       console.log(\"Something went wrong!\", err);\n  //     }\n  //   );\n  return (\n    <div>\n      <h1>Hello!</h1>\n      <p>Your token is {token}</p>\n    </div>\n  );\n};\n\nexport default Auth;\n"]},"metadata":{},"sourceType":"module"}